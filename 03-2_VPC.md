# 学んだこと

・VPCの基本構造（Public / Private サブネット、IGW、NAT Gateway）の理解。

・ルートテーブルの役割とPublic/Privateでのルート分け。

・Security Group（Stateful）とNACL（Stateless）の違い。

・踏み台EC2経由でPrivateサブネットにSSHする仕組み。

・NAT Gatewayを使ったPrivate EC2からのインターネット接続方法。

#   やったこと

## CIDRを分割してサブネットを作成

・10.0.0.0/16 → 10.0.1.0/24 (Public), 10.0.2.0/24 (Private)。

## VPC作成とサブネット配置

・Public / Privateサブネットを作り、IGWとNAT Gatewayを設定。

## ルートテーブル設定

・Public → IGW, Private → NAT Gateway。

## Security Group設定

・踏み台EC2: SSH自分IP許可。

・Private EC2: SSH踏み台SG許可。

## 踏み台EC2を経由してPrivate EC2にSSH接続

## NAT経由でのインターネット通信確認

・ping 8.8.8.8, curl https://example.com

# 気づき

・CIDRの計算ミスでサブネットが重複すると作れない → 慎重に確認。

・Security GroupのInbound/OutboundやSG参照の考え方は最初は混乱しやすい。

・Private EC2は直接インターネットからアクセスできないので踏み台経由のSSHが必須。

・NAT Gateway設定後もルートテーブルを忘れると通信不可 → 設定の順序が大事。

・実際に手を動かして構築すると、VPCやネットワークの理解がぐっと深まる。

# VPC構成図（テキストベース）

      ┌─────────────┐
      │   Internet  │
      └─────┬───────┘
            │
          IGW
            │
    ┌───────┴────────┐
    │  Public Subnet │
    │   10.0.1.0/24  │
    │ ┌────────────┐ │
    │ │ EC2 (Bastion)│
    │ └────────────┘ │
    └───────┬────────┘
            │
          Route
            │
    ┌───────┴────────┐
    │ Private Subnet │
    │   10.0.2.0/24  │
    │ ┌────────────┐ │
    │ │ EC2 (App)  │ │
    │ └────────────┘ │
    └───────┬────────┘
            │
          NAT Gateway
            │
         Internet

